<div id="parameters">
  <div class="card bg-light">
    <div class="card-body">
      <form [formGroup]="filterForm">
        <!-- INDICATOR -->
        <div class="mb-3">
          <label class="col-form-label"><strong>Indicator:</strong></label>
          <select
            id="indicatorGroup"
            formControlName="indicator"
            class="form-select"
          >
            <option *ngFor="let i of indicators" [value]="i.code">
              {{ i.label }}
            </option>
          </select>
        </div>
        <!-- ADMINISTRATIVE -->
        <div class="mb-3">
          <label class="col-form-label"><strong>Administrative:</strong></label>
          <select
            id="administrativeGroup"
            formControlName="administrative"
            class="form-select"
          >
            <option *ngFor="let i of administratives" [value]="i.code">
              {{ i.label }}
            </option>
          </select>
        </div>
        <!-- DAILY METRICS -->
        <div class="mb-3">
          <label class="col-form-label"><strong>Daily metric:</strong> </label>
          <div
            *ngFor="let i of dailyMetrics"
            id="dailyMetricsGroup"
            class="form-check"
          >
            <input
              mdbRadio
              class="form-check-input"
              type="radio"
              id="flexRadioDefault1"
              formControlName="daily_metric"
              [value]="i.code"
            />
            <label class="form-check-label" for="flexRadioDefault1">
              {{ i.label }}
            </label>
          </div>
        </div>
        <!-- DAY-->
        <div class="mb-3">
          <label class="col-form-label"><strong>Time period:</strong> </label>
          <div
            *ngFor="let i of timePeriods"
            id="timePeriodGroup"
            class="form-check"
          >
            <input
              mdbRadio
              class="form-check-input"
              type="radio"
              id="flexRadioDefault2"
              formControlName="timePeriod"
              [value]="i.code"
            />
            <label class="form-check-label" for="flexRadioDefault2">
              {{ i.label }}
            </label>
          </div>
        </div>
        <!-- DAY SELECTION -->
        <div class="mb-3" *ngIf="filterForm.value.timePeriod == 'day'">
          <div class="input-group">
            <input
              class="form-control"
              id="day"
              formControlName="day"
              placeholder="dd/mm/yyyy"
              [maxDate]="maxDate"
              [minDate]="minDate"
              [footerTemplate]="footerTemplate"
              ngbDatepicker
              #d="ngbDatepicker"
              [ngClass]="{
                'is-invalid':
                  !this.filterForm.get('day').value &&
                  this.filterForm.get('timePeriod').value === 'day'
              }"
            />
            <ng-template #footerTemplate>
              <hr class="my-0" />
              <button
                class="btn btn-secondary btn-sm m-2 float-end"
                (click)="d.close()"
              >
                Close
              </button>
            </ng-template>
            <button
              class="btn btn-outline-secondary"
              (click)="d.toggle()"
              type="button"
            >
              <i class="fa fa-calendar"></i>
            </button>
          </div>
          <div
            class="invalid-feedback"
            *ngIf="
              !this.filterForm.get('day').value &&
              this.filterForm.get('timePeriod').value === 'day'
            "
          >
            Please choose a date.
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
