<div class="container" *ngIf="ssr.isServer">
  <div class="row">
    <div class="col-12 p-5 text-center" *ngIf="ssr.isServer">
      <div class="spinner-grow" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  </div>
</div>
<div class="container applications" *ngIf="ssr.isBrowser">
  <ngx-spinner
    type="ball-scale-multiple"
    bdColor="rgba(255,255,255,0.8)"
    color="#6c757d"
    zIndex="1000"
    [fullScreen]="false"
    size="medium"
  ></ngx-spinner>
  <div class="row g-0 justify-content-md-center" *ngIf="datasets">
    <!-- no datasets -->
    <ng-template #noResults>
      <div class="col">
        <hr class="mt-2 mb-3" />
        <div class="no-results">
          <h2>No Datasets</h2>
          <p>we are sorry but no dataset is available yet</p>
        </div>
      </div>
    </ng-template>

    <div class="col" *ngIf="datasets.length > 0; else noResults">
      <!-- view applications -->
      <ng-container *ngIf="isApplication; else datasetsView">
        <hld-applications
          [datasets]="datasets"
          [user]="user"
        ></hld-applications>
      </ng-container>
      <!-- view datasets -->
      <ng-template #datasetsView>
        <div
          class="table-responsive mb-2"
          *ngIf="datasets?.length"
          #tableWrapper
        >
          <div class="row gx-0">
            <div class="col-12 col-md-6 col-lg-4">
              <input
                type="text"
                class="search-filter w-100"
                placeholder="Type to filter the dataset name..."
                (keyup)="updateFilter($event)"
              />
            </div>
          </div>
          <ngx-datatable
            class="bootstrap"
            [rows]="rows"
            [columnMode]="ColumnMode.force"
            [footerHeight]="50"
            [headerHeight]="0"
            rowHeight="auto"
            [limit]="10"
          >
            <ngx-datatable-column name="Label">
              <ng-template
                let-value="value"
                let-row="row"
                ngx-datatable-cell-template
              >
                <div class="row">
                  <div class="d-none d-sm-block col-sm-1 text-center">
                    <span
                      class="fa fa-database fa-2x fa-blue"
                      aria-hidden="true"
                    ></span>
                  </div>
                  <div class="search-result-details col-xs-11 col-12 col-sm-11">
                    <h3>
                      <a href [routerLink]="[row.id]" [state]="row">{{
                        value
                      }}</a>
                    </h3>
                    <ng-container *ngIf="row.description">
                      <p>
                        <span
                          class="fa fa-quote-left fa-gray fa-flip-vertical pull-left me-1"
                        ></span>
                        <span [innerHTML]="row.description"></span>
                      </p>
                    </ng-container>
                  </div>
                </div>
              </ng-template>
            </ngx-datatable-column>
          </ngx-datatable>
        </div>
      </ng-template>
    </div>
  </div>
</div>
