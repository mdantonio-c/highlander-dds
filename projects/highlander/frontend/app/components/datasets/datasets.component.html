<div class="container" *ngIf="ssr.isServer">
  <div class="row">
    <div class="col-12 p-5 text-center" *ngIf="ssr.isServer">
      <div class="spinner-grow" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  </div>
</div>
<div class="container-fluid py-0" *ngIf="ssr.isBrowser">
  <ngx-spinner
    bdColor="rgba(255,255,255,0.8)"
    color="#6c757d"
    zIndex="1000"
    [fullScreen]="false"
    size="medium"
  ></ngx-spinner>
  <div class="row g-0 justify-content-md-center" *ngIf="datasets">
    <!-- no datasets -->
    <ng-template #noResults>
      <div class="col">
        <hr class="mt-2 mb-3" />
        <div class="no-results">
          <h2>No Datasets</h2>
          <p>we are sorry but no dataset is available yet</p>
        </div>
      </div>
    </ng-template>

    <div class="col" *ngIf="datasets.length > 0; else noResults">
      <!-- view applications -->
      <ng-container *ngIf="isApplication; else datasetsView">
        <hld-applications
          [datasets]="datasets"
          [user]="user"
        ></hld-applications>
      </ng-container>
      <!-- view datasets -->

      <ng-template #datasetsView>
        <div *ngIf="datasets?.length" #tableWrapper >
          <div class="d-sm-flex align-items-center justify-content-between">
            <h2 class="ps-2">{{ title }}</h2>
            <div class="col-sm-8 col-md-6 col-lg-4 ps-2">
              <input
                type="text"
                class="search-filter w-100 form-control"
                placeholder="Type to filter the dataset name..."
                (keyup)="updateFilter($event)"
              />
            </div>
          </div>
          <ngx-datatable
            class="bootstrap table"
            [rows]="rows"
            [columnMode]="ColumnMode.force"
            [footerHeight]="50"
            [headerHeight]="0"
            rowHeight="auto"
            [limit]="4"
            
          >
            <ngx-datatable-column name="Label">
              <ng-template
                let-value="value"
                let-row="row"
                ngx-datatable-cell-template
                [dataset]="dataset"
              >
                <div class="row">
                  <div class="d-none d-sm-block col-sm-1 text-center">
                    <span
                      class="fa fa-database fa-2x fa-blue"
                      aria-hidden="true"
                    ></span>
                  </div>
                  <div class="search-result-details col-xs-11 col-12 col-sm-11">
                    <h3>
                      <a href [routerLink]="[row.id]" [state]="row">{{
                        value
                      }}</a>
                    </h3>
                    <ng-container *ngFor="let dataset of datasets">
                      <ol *ngIf="dataset.use_case" class="breadcrumb ">
                        <li class="breadcrumb-item active mb-0 px-1 py-1 mb-2 rounded">
                          <span>{{ dataset.use_case }}</span>
                        </li>
                      </ol>
                    </ng-container>
                    <ng-container *ngIf="row.description">
                      <p>
                        <span
                          class="fa fa-quote-left fa-gray fa-flip-vertical pull-left me-1"
                        ></span>
                        <span [innerHTML]="row.description"></span>
                      </p>
                    </ng-container>
                  </div>
                </div>
              </ng-template>
            </ngx-datatable-column>
          </ngx-datatable>
        </div>
      </ng-template>
    </div>
  </div>
</div>
